<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>하늘대학부 리더십 말씀 선물</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Malgun Gothic', sans-serif;
      background: linear-gradient(to bottom, #f5f0e8 0%, #e8dcc8 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    /* 페이지 전환 */
    .page { display: none; }
    .page.active { display: block; }

    /* 메인 페이지 */
    .container {
      background: linear-gradient(to bottom, #f5f0e8 0%, #f0e8d8 30%, #e8dcc8 60%, #d8ccb8 100%);
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      max-width: 600px; width: 100%;
      overflow: hidden;
    }
    .header { text-align: center; padding: 30px 20px 20px; }
    .logo { color: #5b8fc7; font-size: 16px; font-weight: bold; margin-bottom: 40px; }
    .year-badge {
      display: inline-block; border: 3px solid #333; border-radius: 50px;
      padding: 8px 35px; font-size: 24px; font-weight: bold; margin-bottom: 30px;
    }
    .main-title { font-size: 36px; font-weight: bold; line-height: 1.4; margin-bottom: 60px; color: #222; }
    .btn-primary {
      display: block; width: 100%; max-width: 500px; margin: 0 auto 20px; padding: 18px 30px;
      background: linear-gradient(to bottom, #6b5d4f 0%, #4a3f35 100%);
      color: white; font-size: 18px; font-weight: bold; border: none; border-radius: 12px;
      cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    /* 결과 페이지 */
    .result-container {
      background: linear-gradient(135deg, #e8f4f8 0%, #b8d4e8 100%);
      min-height: 100vh; width: 100vw;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      position: fixed; top: 0; left: 0; padding: 40px 20px;
    }
    .result-card {
      background: #fefdfb; border: 3px solid #d4b896; border-radius: 20px 20px 30px 30px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15);
      padding: 60px 40px 40px; max-width: 450px; width: 90%; margin-bottom: 30px;
    }
    .year-badge-small {
      display: inline-block; background: #d4b896; color: white;
      border-radius: 20px; padding: 4px 16px; font-size: 14px; font-weight: bold;
    }
    .verse-title { font-size: 18px; font-weight: bold; color: #333; margin-bottom: 30px; }
    .verse-content { font-size: 16px; line-height: 1.8; color: #333; margin-bottom: 25px; text-align: center; }
    .verse-reference { font-size: 14px; color: #666; text-align: center; }
    .button-container { display: flex; gap: 15px; max-width: 450px; width: 90%; }
    .btn-secondary {
      flex: 1; padding: 16px 20px; background: #333; color: white;
      font-size: 16px; font-weight: bold; border: none; border-radius: 12px;
      cursor: pointer; transition: all 0.3s ease;
    }
    .btn-download { background: white; color: #333; border: 2px solid #ddd; }

    /* 미리보기 모달 */
    #previewModal {
      display: none; position: fixed; top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,0.6); display:flex; align-items:center; justify-content:center;
      z-index:9999;
    }
    #previewModal .modal-content {
      background:white; padding:20px; border-radius:12px; text-align:center; max-width:500px; width:90%;
    }
    #previewModal img { max-width:100%; border:1px solid #ddd; margin-bottom:15px; }
  </style>
</head>
<body>

  <!-- 메인 페이지 -->
  <div id="mainPage" class="page active">
    <div class="container">
      <div class="header">
        <div class="logo">Haneul</div>
        <div class="year-badge">2025</div>
        <h1 class="main-title">선한 걸음을 위한,<br>응원 말씀</h1>
      </div>
      <div class="content">
        <p class="subtitle">선한 사람의 걸음을 여호와께서 정하시니<br>그분은 그 길을 기뻐하십니다.</p>
        <p class="description">시편 37편 23절</p>
        <button class="btn-primary" onclick="startLoading()">랜덤 말씀 뽑기</button>
      </div>
    </div>
  </div>

  <!-- 로딩 페이지 -->
  <div id="loadingPage" class="page">
    <div class="loading-container">
      <div class="loading-text">내게 꼭 맞는 말씀을 찾는 중입니다!</div>
    </div>
  </div>

  <!-- 결과 페이지 -->
  <div id="resultPage" class="page">
    <div class="result-container">
      <div class="result-card" id="verseCard">
        <div style="text-align: center;">
          <span class="year-badge-small">2025</span>
          <div class="verse-title">응원 말씀</div>
        </div>
        <div class="verse-content" id="verseContent"></div>
        <div class="verse-reference" id="verseReference"></div>
      </div>
      <div class="button-container">
        <button class="btn-secondary" onclick="startLoading()">말씀 다시 뽑기</button>
        <button class="btn-secondary btn-download" onclick="previewImage()">📥 이미지 저장</button>
      </div>
    </div>
  </div>

  <!-- 미리보기 모달 -->
  <div id="previewModal">
    <div class="modal-content">
      <h3>📸 저장할 이미지 미리보기</h3>
      <img id="previewImage" src="" alt="Preview">
      <div>
        <button class="btn-secondary" onclick="saveImage()">저장하기</button>
        <button class="btn-secondary" onclick="closePreview()">닫기</button>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script>
    const verses = [
      { content: "너희 중에 누구든지 지혜가 부족하거든<br>모든 사람에게 후히 주시고<br>꾸짖지 아니하시는 하나님께 구하라<br>그리하면 주시리라", reference: "야고보서 1장 5절" },
      { content: "내가 주께 바라는 한 가지 일 그것을 구하리니<br>곧 내가 내 평생에 여호와의 집에 살면서<br>여호와의 아름다움을 바라보며<br>그의 성전에서 사모하는 그것이라", reference: "시편 27편 4절" },
      { content: "그러므로 염려하여 이르기를 무엇을 먹을까<br>무엇을 마실까 무엇을 입을까 하지 말라<br>너희 하늘 아버지께서 이 모든 것이 너희에게 있어야 할 줄을 아시느니라", reference: "마태복음 6장 31-32절" },
      { content: "수고하고 무거운 짐 진 자들아 다 내게로 오라<br>내가 너희를 쉬게 하리라", reference: "마태복음 11장 28절" },
      { content: "내가 산을 향하여 눈을 들리라 나의 도움이 어디서 올까<br>나의 도움은 천지를 지으신 여호와에게서로다", reference: "시편 121편 1-2절" },
      { content: "여호와는 나의 목자시니 내게 부족함이 없으리로다<br>그가 나를 푸른 풀밭에 누이시며 쉴 만한 물가로 인도하시는도다", reference: "시편 23편 1-2절" },
      { content: "너는 마음을 다하여 여호와를 신뢰하고 네 명철을 의지하지 말라<br>너는 범사에 그를 인정하라 그리하면 네 길을 지도하시리라", reference: "잠언 3장 5-6절" },
      { content: "주 안에서 항상 기뻐하라 내가 다시 말하노니 기뻐하라<br>너희 관용을 모든 사람에게 알게 하라 주께서 가까우시니라", reference: "빌립보서 4장 4-5절" }
    ];

    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(pageId).classList.add('active');
    }

    function startLoading() {
      showPage('loadingPage');
      setTimeout(() => {
        const randomVerse = verses[Math.floor(Math.random() * verses.length)];
        document.getElementById('verseContent').innerHTML = randomVerse.content;
        document.getElementById('verseReference').textContent = randomVerse.reference;
        showPage('resultPage');
      }, 1500);
    }

    let lastCanvas;
    function previewImage() {
      const card = document.getElementById('verseCard');
      html2canvas(card, { backgroundColor: '#fefdfb', scale: 2 }).then(canvas => {
        lastCanvas = canvas;
        document.getElementById('previewImage').src = canvas.toDataURL('image/png');
        document.getElementById('previewModal').style.display = 'flex';
      });
    }

    function saveImage() {
      if (!lastCanvas) return;
      const link = document.createElement('a');
      link.download = '하늘대학부_응원말씀_2025.png';
      link.href = lastCanvas.toDataURL('image/png');
      link.click();
      closePreview();
    }

    function closePreview() {
      document.getElementById('previewModal').style.display = 'none';
    }
  </script>
</body>
</html>
